{% extends 'blog/base.html' %}
{% load static %}
{% load crispy_forms_tags %}


{% block content %}
    <div class="container">
        <div class="content-section">
          <div class="media">
            <img class="rounded-circle account-img" src="{{ user.profile.image.url }}">
            <div class="media-body">
              <h2 class="account-heading">{{ user.username }}</h2>
              <p class="text-secondary">{{ user.email }}</p>
            </div>
          </div>
        <form method="POST" enctype="multipart/form-data">

            {% csrf_token %}
            <fieldset class="form-group">
                <legend class="border-bottom mb-4">Profile Info</legend>
                    {{ u_form|crispy }}
                    {{ p_form|crispy }}
            </fieldset>
            <div class="form-group">
                <input class="btn btn-outline-info" type="submit" value="Update">
            </div>



            <!--Afficher les details du formulaire de la formation de l'utilisateur-->

                            <br>

                <div class="row">
                    <div class="col-md">
                        <div class="card card-body">
                            <h5 class="d-flex justify-content-center">Formations:</h5>
                            <hr>
                                <table class="table table-sm">
                                    <tr>
                                        <th>Intitulé</th>
                                        <th>établissement</th>
                                        <th>description</th>
                                        <th>date_de_début</th>
                                        <th>date_de_fin</th>
                                        <th>domaine</th>
                                        <th>langages_de_programmation</th>
                                    </tr>
                                        {% for formation in formation_data %}
                                     <tr>
                                            <td>{{formation.intitulé}}</td>
                                            <td>{{formation.établissement}}</td>
                                            <td>{{formation.description}}</td>
                                            <td>{{formation.date_de_début}}</td>
                                            <td>{{formation.date_de_fin}}</td>
                                            <td>{{formation.domaine}}</td>
                                            <td>{{formation.langages_de_programmation}}</td>
                                    </tr>
                                            {% endfor  %}
                                </table>
                        </div>
                    </div>
                </div>

                <br>

                <div class="row">
                    <div class="col-md-9">
                        <div class="card card-body">
                            <h5 class="d-flex justify-content-center">Projets:</h5>
                            <hr>
                                <table class="table table-sm">
                                    <tr>
                                        <th>Intitulé</th>
                                        <th>Période</th>
                                        <th>Lien</th>
                                    </tr>
                                        {% for projet in projets_data %}
                                     <tr>
                                            <td>{{projet.intitulé}}</td>
                                            <td>{{projet.période}}</td>
                                            <td>{{projet.lien}}</td>
                                    </tr>
                                            {% endfor  %}
                                </table>
                        </div>
                    </div>
                </div>

            </form>

            <br>


            <div class="col-md">
                <div class="card card-body">
                    <h5>Informations</h5>
                    <hr>
                    <p>Email: {{user.email}}</p>
                    <p>Telephone: {{user.profile.phone}}</p>
                </div>
            </div>

        </div>



{% endblock content %}
